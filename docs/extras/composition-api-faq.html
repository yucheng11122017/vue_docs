<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="generator" content="MarkBind 4.0.2">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title></title>
    <link rel="stylesheet" href="../../markbind/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../markbind/fontawesome/css/all.min.css">
    <link rel="stylesheet" href="../../markbind/glyphicons/css/bootstrap-glyphicons.min.css">
    <link rel="stylesheet" href="../../markbind/css/octicons.css">
    <link rel="stylesheet" href="../../markbind/material-icons/material-icons.css">
    <link rel="stylesheet" href="../../markbind/css/codeblock-dark.min.css"><link rel="stylesheet" href="../../markbind/css/markbind.min.css"><script src="../../markbind/js/polyfill.min.js"></script>
    <script src="../../markbind/js/vue.min.js"></script>
    <script src="../../markbind/js/markbind.min.js"></script>
    <script src="composition-api-faq.page-vue-render.js"></script>
    <script src="../../markbind/js/jquery.min.js"></script><link rel="stylesheet" href="/plugins/markbind-plugin-anchors/markbind-plugin-anchors.css"><link rel="stylesheet" href="/plugins/markbind-plugin-tree/markbind-plugin-tree.css">
    
  <link rel="stylesheet" href="/stylesheets/main.css">
</head>
<script>
  const baseUrl = ''
</script>
<body >
<div id="app" data-server-rendered="true"><header sticky=""><div data-v-15113a2f><nav class="navbar navbar-expand-md d-print-none navbar-dark bg-dark" data-v-15113a2f><div class="container-fluid" data-v-15113a2f><div class="navbar-left" data-v-15113a2f></div> <div class="navbar-default" data-v-15113a2f><ul class="navbar-nav me-auto mt-2 mt-lg-0" data-v-15113a2f><li class="nav-link dropdown" data-v-2e98b3f0><a role="button" data-bs-toggle="dropdown" class="dropdown-toggle" data-v-2e98b3f0>Essentials</a> <ul class="dropdown-menu" data-v-2e98b3f0> <li data-v-2e98b3f0><a href="/docs/essentials/application.html" class="dropdown-item" data-v-2e98b3f0>Creating an Application</a></li> <li data-v-2e98b3f0><a href="/docs/essentials/template-syntax.html" class="dropdown-item" data-v-2e98b3f0>Template Syntax</a></li></ul></li> <li class="nav-link dropdown" data-v-2e98b3f0><a role="button" data-bs-toggle="dropdown" class="dropdown-toggle" data-v-2e98b3f0>Components In-Depth</a> <ul class="dropdown-menu" data-v-2e98b3f0> <li data-v-2e98b3f0><a href="/docs/components/registration.html" class="dropdown-item" data-v-2e98b3f0>Registration</a></li> <li data-v-2e98b3f0><a href="/docs/components/props.html" class="dropdown-item" data-v-2e98b3f0>Props</a></li> <li data-v-2e98b3f0><a href="/docs/components/events.html" class="dropdown-item" data-v-2e98b3f0>Events</a></li> <li data-v-2e98b3f0><a href="/docs/components/v-model.html" class="dropdown-item" data-v-2e98b3f0>Component v-model</a></li> <li data-v-2e98b3f0><a href="/docs/components/attrs.html" class="dropdown-item" data-v-2e98b3f0>Fallthrough Attributes</a></li> <li data-v-2e98b3f0><a href="/docs/components/slots.html" class="dropdown-item" data-v-2e98b3f0>Slots</a></li> <li data-v-2e98b3f0><a href="/docs/components/provide-inject.html" class="dropdown-item" data-v-2e98b3f0>Provide / inject</a></li> <li data-v-2e98b3f0><a href="/docs/components/async.html" class="dropdown-item" data-v-2e98b3f0>Async Components</a></li></ul></li> <li class="nav-link dropdown" data-v-2e98b3f0><a role="button" data-bs-toggle="dropdown" class="dropdown-toggle" data-v-2e98b3f0>Built-in Components</a> <ul class="dropdown-menu" data-v-2e98b3f0> <li data-v-2e98b3f0><a href="/docs/built-ins/transition.html" class="dropdown-item" data-v-2e98b3f0>Transition</a></li> <li data-v-2e98b3f0><a href="/docs/built-ins/transition-group.html" class="dropdown-item" data-v-2e98b3f0>TransitionGroup</a></li> <li data-v-2e98b3f0><a href="/docs/built-ins/keep-alive.html" class="dropdown-item" data-v-2e98b3f0>KeepAlive</a></li> <li data-v-2e98b3f0><a href="/docs/built-ins/teleport.html" class="dropdown-item" data-v-2e98b3f0>Teleport</a></li> <li data-v-2e98b3f0><a href="/docs/built-ins/suspense.html" class="dropdown-item" data-v-2e98b3f0>Suspense</a></li></ul></li>
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
    <li class="nav-link dropdown" data-v-2e98b3f0><a role="button" data-bs-toggle="dropdown" class="dropdown-toggle" data-v-2e98b3f0>Extra Topics</a> <ul class="dropdown-menu" data-v-2e98b3f0> <li data-v-2e98b3f0><a href="/docs/extras/ways-of-using-vue.html" class="dropdown-item" data-v-2e98b3f0>Ways of using Vue</a></li> <li data-v-2e98b3f0><a href="/docs/extras/composition-api-faq.html" class="dropdown-item" data-v-2e98b3f0>Composition API FAQ</a></li> <li data-v-2e98b3f0><a href="/docs/extras/reactivity-in-depth.html" class="dropdown-item" data-v-2e98b3f0>Reactivity in Depth</a></li> <li data-v-2e98b3f0><a href="/docs/extras/rendering-mechanism.html" class="dropdown-item" data-v-2e98b3f0>Rendering Mechanism</a></li> <li data-v-2e98b3f0><a href="/docs/extras/render-function.html" class="dropdown-item" data-v-2e98b3f0>Render Functions &amp; JSX</a></li> <li data-v-2e98b3f0><a href="/docs/extras/web-components.html" class="dropdown-item" data-v-2e98b3f0>Vue and Web components</a></li> <li data-v-2e98b3f0><a href="/docs/extras/animation.html" class="dropdown-item" data-v-2e98b3f0>Animation Techniques</a></li> <li data-v-2e98b3f0><a href="/docs/extras/reactivity-transform.html" class="dropdown-item" data-v-2e98b3f0>Reactivity Transform</a></li>
=======
    <li class="nav-link dropdown-submenu dropend" data-v-3d2bfc10 data-v-2e98b3f0><a role="button" data-bs-toggle="dropdown" class="dropdown-item submenu-toggle" data-v-3d2bfc10>Best practises</a> <ul class="dropdown-menu" data-v-3d2bfc10> <li data-v-3d2bfc10><a href="/docs/best-practices/production-deployment.html" class="dropdown-item" data-v-3d2bfc10>Production Deployment</a></li> <li data-v-3d2bfc10><a href="/docs/best-practices/performance.html" class="dropdown-item" data-v-3d2bfc10>Performance</a></li> <li data-v-3d2bfc10><a href="/docs/best-practices/accessibility.html" class="dropdown-item" data-v-3d2bfc10>Accessibility</a></li> <li data-v-3d2bfc10><a href="/docs/best-practices/security.html" class="dropdown-item" data-v-3d2bfc10>Security</a></li>
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 473d14335b50a8d8d2ed962afbba21a01abdecd7
    </ul></li></ul></li></ul></div> <!----></div></nav> <div class="lower-navbar-container" style="display:none;" data-v-15113a2f><!----> <!----></div></div></header> <div id="flex-body"><nav id="site-nav" data-v-e8c82f88><div class="site-nav-top" data-v-e8c82f88><div class="fw-bold mb-2" style="font-size:1.25rem;" data-v-e8c82f88>Template</div></div> <div class="nav-component slim-scroll" data-v-e8c82f88><div class="site-nav-root"><ul class="site-nav-list site-nav-list-root" data-v-e8c82f88><li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e8c82f88>Getting Started 

<i onclick="handleSiteNavClick(this.parentNode, false); event.stopPropagation();" class="site-nav-dropdown-btn-icon site-nav-rotate-icon" data-v-e8c82f88><span aria-hidden="true" class="glyphicon glyphicon-menu-down" data-v-e8c82f88></span></i></div><ul class="site-nav-dropdown-container site-nav-dropdown-container-open site-nav-list" data-v-e8c82f88><li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="/docs/introduction.html" data-v-e8c82f88>Introduction</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="/docs/quick-start.html" data-v-e8c82f88>Quick Start</a></div></li></ul></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e8c82f88>Essentials 

<i onclick="handleSiteNavClick(this.parentNode, false); event.stopPropagation();" class="site-nav-dropdown-btn-icon site-nav-rotate-icon" data-v-e8c82f88><span aria-hidden="true" class="glyphicon glyphicon-menu-down" data-v-e8c82f88></span></i></div><ul class="site-nav-dropdown-container site-nav-dropdown-container-open site-nav-list" data-v-e8c82f88><li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="/docs/essentials/application.html" data-v-e8c82f88>Creating an Application</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="/docs/essentials/template-syntax.html" data-v-e8c82f88>Template Syntax</a></div></li></ul></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e8c82f88>Components In-Depth

<i onclick="handleSiteNavClick(this.parentNode, false); event.stopPropagation();" class="site-nav-dropdown-btn-icon" data-v-e8c82f88><span aria-hidden="true" class="glyphicon glyphicon-menu-down" data-v-e8c82f88></span></i></div><ul class="site-nav-dropdown-container site-nav-list" data-v-e8c82f88><li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="/docs/components/registration.html" data-v-e8c82f88>Registration</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="/docs/components/props.html" data-v-e8c82f88>Props</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="/docs/components/events.html" data-v-e8c82f88>Events</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="/docs/components/v-model.html" data-v-e8c82f88>Component v-model</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="/docs/components/attrs.html" data-v-e8c82f88>Fallthrough Attributes</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="/docs/components/slots.html" data-v-e8c82f88>Slots</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="/docs/components/provide-inject.html" data-v-e8c82f88>Provide / inject</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="/docs/components/async.html" data-v-e8c82f88>Async Components</a></div></li></ul></li> <li class="site-nav-custom-list-item site-nav-list-item-0" data-v-e8c82f88>Reusability</li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e8c82f88>Built-in Components

<i onclick="handleSiteNavClick(this.parentNode, false); event.stopPropagation();" class="site-nav-dropdown-btn-icon" data-v-e8c82f88><span aria-hidden="true" class="glyphicon glyphicon-menu-down" data-v-e8c82f88></span></i></div><ul class="site-nav-dropdown-container site-nav-list" data-v-e8c82f88><li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="/docs/built-ins/transition.html" data-v-e8c82f88>Transition</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="/docs/built-ins/transition-group.html" data-v-e8c82f88>TransitionGroup</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="/docs/built-ins/keep-alive.html" data-v-e8c82f88>KeepAlive</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="/docs/built-ins/teleport.html" data-v-e8c82f88>Teleport</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="/docs/built-ins/suspense.html" data-v-e8c82f88>Suspense</a></div></li></ul></li> <li class="site-nav-custom-list-item site-nav-list-item-0" data-v-e8c82f88>Scaling Up</li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e8c82f88>Best Practices 

<i onclick="handleSiteNavClick(this.parentNode, false); event.stopPropagation();" class="site-nav-dropdown-btn-icon site-nav-rotate-icon" data-v-e8c82f88><span aria-hidden="true" class="glyphicon glyphicon-menu-down" data-v-e8c82f88></span></i></div><ul class="site-nav-dropdown-container site-nav-dropdown-container-open site-nav-list" data-v-e8c82f88><li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="/docs/best-practices/production-deployment.html" data-v-e8c82f88>Production Deployment</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="/docs/best-practices/performance.html" data-v-e8c82f88>Performance</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="/docs/best-practices/accessibility.html" data-v-e8c82f88>Accessibility</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="/docs/best-practices/security.html" data-v-e8c82f88>Security</a></div></li></ul></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-0" data-v-e8c82f88>Extra topics 

<i onclick="handleSiteNavClick(this.parentNode, false); event.stopPropagation();" class="site-nav-dropdown-btn-icon site-nav-rotate-icon" data-v-e8c82f88><span aria-hidden="true" class="glyphicon glyphicon-menu-down" data-v-e8c82f88></span></i></div><ul class="site-nav-dropdown-container site-nav-dropdown-container-open site-nav-list" data-v-e8c82f88><li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="/docs/extras/ways-of-using-vue.html" data-v-e8c82f88>Ways of using Vue</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="/docs/extras/composition-api-faq.html" data-v-e8c82f88>Composition API FAQ</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="/docs/extras/reactivity-in-depth.html" data-v-e8c82f88>Reactivity in Depth</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="/docs/extras/rendering-mechanism.html" data-v-e8c82f88>Rendering Mechanism</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="/docs/extras/render-function.html" data-v-e8c82f88>Render Functions &amp; JSX</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="/docs/extras/web-components.html" data-v-e8c82f88>Vue and Web Components</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="/docs/extras/animation.html" data-v-e8c82f88>Animation Techniques</a></div></li> <li data-v-e8c82f88><div onclick="handleSiteNavClick(this)" class="site-nav-default-list-item site-nav-list-item-1" data-v-e8c82f88><a href="/docs/extras/reactivity-transform.html" data-v-e8c82f88>Reactivity Transform</a></div></li></ul></li> <li class="site-nav-custom-list-item site-nav-list-item-0" data-v-e8c82f88>TypeScript</li> <li class="site-nav-custom-list-item site-nav-list-item-0" data-v-e8c82f88>Extra Topics</li> <!----></ul></div></div> <!----></nav> <div id="content-wrapper"><h1 id="composition-api-faq"><span id="composition-api-faq" class="anchor"></span>Composition API FAQ<a href="#composition-api-faq" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h1> <div class="alert box-container alert-success" data-v-7d17494f><!----> <div class="header-and-body" data-v-7d17494f><!----> <div class="box-body-wrapper" data-v-7d17494f><div class="icon-wrapper" data-v-7d17494f><i class="fas fa-lightbulb" data-v-7d17494f></i></div> <!----> <div class="contents" data-v-7d17494f>
This FAQ assumes prior experience with Vue - in particular, experience with Vue 2 while primarily using Options API.
</div> <!----></div></div></div> <h2 id="what-is-composition-api"><span id="what-is-composition-api" class="anchor"></span>What is Composition API?<a href="#what-is-composition-api" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>Composition API is a set of APIs that allows us to author Vue components using imported functions instead of declaring options. It is an umbrella term that covers the following APIs:</p> <ul><li><p><a href="/api/reactivity-core.html">Reactivity API</a>, e.g. <code class="hljs inline no-lang">ref()</code> and <code class="hljs inline no-lang">reactive()</code>, that allows us to directly create reactive state, computed state, and watchers.</p></li> <li><p><a href="/api/composition-api-lifecycle.html">Lifecycle Hooks</a>, e.g. <code class="hljs inline no-lang">onMounted()</code> and <code class="hljs inline no-lang">onUnmounted()</code>, that allow us to programmatically hook into the component lifecycle.</p></li> <li><p><a href="/api/composition-api-dependency-injection.html">Dependency Injection</a>, i.e. <code class="hljs inline no-lang">provide()</code> and <code class="hljs inline no-lang">inject()</code>, that allow us to leverage Vue's dependency injection system while using Reactivity APIs.</p></li></ul> <p>Composition API is a built-in feature of Vue 3 and <a href="https://blog.vuejs.org/posts/vue-2-7-naruto.html">Vue 2.7</a>. For older Vue 2 versions, use the officially maintained <a href="https://github.com/vuejs/composition-api"><code class="hljs inline no-lang">@vue/composition-api</code></a> plugin. In Vue 3, it is also primarily used together with the <a href="/api/sfc-script-setup.html"><code class="hljs inline no-lang">&lt;script setup&gt;</code></a> syntax in Single-File Components. Here's a basic example of a component using Composition API:</p> <pre><code class="hljs"><span>&lt;script setup&gt;
</span><span>import { ref, onMounted } from 'vue'
</span><span>
</span><span>// reactive state
</span><span>const count = ref(0)
</span><span>
</span><span>// functions that mutate state and trigger updates
</span><span>function increment() {
</span><span>  count.value++
</span><span>}
</span><span>
</span><span>// lifecycle hooks
</span><span>onMounted(() =&gt; {
</span><span>  console.log(`The initial count is ${count.value}.`)
</span><span>})
</span><span>&lt;/script&gt;
</span><span>
</span><span>&lt;template&gt;
</span><span>  &lt;button @click=&quot;increment&quot;&gt;Count is: &lt;/button&gt;
</span><span>&lt;/template&gt;
</span></code><div class="function-btn-container"><button onclick="copyCodeBlock(this)" class="function-btn">
    <div class="function-btn-body">
    
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18" viewBox="0 0 18 18" version="1.1">
    <g id="surface1">
      <path d="M 11.273438 0 L 2.546875 0 C 1.746094 0 1.089844 0.613281 1.089844
      1.363281 L 1.089844 10.910156 L 2.546875 10.910156 L 2.546875 1.363281 L 11.273438
      1.363281 Z M 13.453125 2.726562 L 5.453125 2.726562 C 4.65625 2.726562 4 3.339844 4
      4.089844 L 4 13.636719 C 4 14.386719 4.65625 15 5.453125 15 L 13.453125 15 C 14.253906
      15 14.910156 14.386719 14.910156 13.636719 L 14.910156 4.089844 C 14.910156 3.339844
      14.253906 2.726562 13.453125 2.726562 Z M 13.453125 13.636719 L 5.453125 13.636719 L
      5.453125 4.089844 L 13.453125 4.089844 Z M 13.453125 13.636719 "></path>
    </g>
</svg>

    </div>
    </button></div></pre><p>Despite an API style based on function composition, <strong>Composition API is NOT functional programming</strong>. Composition API is based on Vue's mutable, fine-grained reactivity paradigm, whereas functional programming emphasizes immutability.</p> <p>If you are interested in learning how to use Vue with Composition API, you can set the site-wide API preference to Composition API using the toggle at the top of the left sidebar, and then go through the guide from the beginning.</p> <h2 id="why-composition-api"><span id="why-composition-api" class="anchor"></span>Why Composition API?<a href="#why-composition-api" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <h3 id="better-logic-reuse"><span id="better-logic-reuse" class="anchor"></span>Better Logic Reuse<a href="#better-logic-reuse" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>The primary advantage of Composition API is that it enables clean, efficient logic reuse in the form of <a href="/guide/reusability/composables.html">Composable functions</a>. It solves <a href="/guide/reusability/composables.html#vs-mixins">all the drawbacks of mixins</a>, the primary logic reuse mechanism for Options API.</p> <p>Composition API's logic reuse capability has given rise to impressive community projects such as <a href="https://vueuse.org/">VueUse</a>, an ever-growing collection of composable utilities. It also serves as a clean mechanism for easily integrating stateful third-party services or libraries into Vue's reactivity system, for example <a href="/guide/extras/reactivity-in-depth.html#immutable-data">immutable data</a>, <a href="/guide/extras/reactivity-in-depth.html#state-machines">state machines</a>, and <a href="https://vueuse.org/rxjs/readme.html#vueuse-rxjs">RxJS</a>.</p> <h3 id="more-flexible-code-organization"><span id="more-flexible-code-organization" class="anchor"></span>More Flexible Code Organization<a href="#more-flexible-code-organization" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>Many users love that we write organized code by default with Options API: everything has its place based on the option it falls under. However, Options API poses serious limitations when a single component's logic grows beyond a certain complexity threshold. This limitation is particularly prominent in components that need to deal with multiple <strong>logical concerns</strong>, which we have witnessed first hand in many production Vue 2 apps.</p> <p>Take the folder explorer component from Vue CLI's GUI as an example: this component is responsible for the following logical concerns:</p> <ul><li>Tracking current folder state and displaying its content</li> <li>Handling folder navigation (opening, closing, refreshing...)</li> <li>Handling new folder creation</li> <li>Toggling show favorite folders only</li> <li>Toggling show hidden folders</li> <li>Handling current working directory changes</li></ul> <p>The <a href="https://github.com/vuejs/vue-cli/blob/a09407dd5b9f18ace7501ddb603b95e31d6d93c0/packages/@vue/cli-ui/src/components/folder/FolderExplorer.vue#L198-L404">original version</a> of the component was written in Options API. If we give each line of code a color based on the logical concern it is dealing with, this is how it looks:</p> <img alt="folder component before" src="/docs/extras/images/options-api.png" width="129" height="500" style="margin:1.2em auto;"> <p>Notice how code dealing with the same logical concern is forced to be split under different options, located in different parts of the file. In a component that is several hundred lines long, understanding and navigating a single logical concern requires constantly scrolling up and down the file, making it much more difficult than it should be. In addition, if we ever intend to extract a logical concern into a reusable utility, it takes quite a bit of work to find and extract the right pieces of code from different parts of the file.</p> <p>Here's the same component, before and after the <a href="https://gist.github.com/yyx990803/8854f8f6a97631576c14b63c8acd8f2e">refactor into Composition API</a>:</p> <p><a href="/docs/extras/images/composition-api-after.png" target="_self"><img src="/docs/extras/images/composition-api-after.png" alt="" class="img-fluid"></a></p> <p>Notice how the code related to the same logical concern can now be grouped together: we no longer need to jump between different options blocks while working on a specific logical concern. Moreover, we can now move a group of code into an external file with minimal effort, since we no longer need to shuffle the code around in order to extract them. This reduced friction for refactoring is key to the long-term maintainability in large codebases.</p> <h3 id="better-type-inference"><span id="better-type-inference" class="anchor"></span>Better Type Inference<a href="#better-type-inference" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>In recent years, more and more frontend developers are adopting <a href="https://www.typescriptlang.org/">TypeScript</a> as it helps us write more robust code, make changes with more confidence, and provides a great development experience with IDE support. However, the Options API, originally conceived in 2013, was designed without type inference in mind. We had to implement some <a href="https://github.com/vuejs/core/blob/44b95276f5c086e1d88fa3c686a5f39eb5bb7821/packages/runtime-core/src/componentPublicInstance.ts#L132-L165">absurdly complex type gymnastics</a> to make type inference work with the Options API. Even with all this effort, type inference for Options API can still break down for mixins and dependency injection.</p> <p>This had led many developers who wanted to use Vue with TS to lean towards Class API powered by <code class="hljs inline no-lang">vue-class-component</code>. However, a class-based API heavily relies on ES decorators, a language feature that was only a stage 2 proposal when Vue 3 was being developed in 2019. We felt it was too risky to base an official API on an unstable proposal. Since then, the decorators proposal has gone through yet another complete overhaul, and finally reached stage 3 in 2022. In addition, class-based API suffers from logic reuse and organization limitations similar to Options API.</p> <p>In comparison, Composition API utilizes mostly plain variables and functions, which are naturally type friendly. Code written in Composition API can enjoy full type inference with little need for manual type hints. Most of the time, Composition API code will look largely identical in TypeScript and plain JavaScript. This also makes it possible for plain JavaScript users to benefit from partial type inference.</p> <h3 id="smaller-production-bundle-and-less-overhead"><span id="smaller-production-bundle-and-less-overhead" class="anchor"></span>Smaller Production Bundle and Less Overhead<a href="#smaller-production-bundle-and-less-overhead" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>Code written in Composition API and <code class="hljs inline no-lang">&lt;script setup&gt;</code> is also more efficient and minification-friendly than Options API equivalent. This is because the template in a <code class="hljs inline no-lang">&lt;script setup&gt;</code> component is compiled as a function inlined in the same scope of the <code class="hljs inline no-lang">&lt;script setup&gt;</code> code. Unlike property access from <code class="hljs inline no-lang">this</code>, the compiled template code can directly access variables declared inside <code class="hljs inline no-lang">&lt;script setup&gt;</code>, without an instance proxy in between. This also leads to better minification because all the variable names can be safely shortened.</p> <h2 id="relationship-with-options-api"><span id="relationship-with-options-api" class="anchor"></span>Relationship with Options API<a href="#relationship-with-options-api" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <h3 id="trade-offs"><span id="trade-offs" class="anchor"></span>Trade-offs<a href="#trade-offs" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>Some users moving from Options API found their Composition API code less organized, and concluded that Composition API is &quot;worse&quot; in terms of code organization. We recommend users with such opinions to look at that problem from a different perspective.</p> <p>It is true that Composition API no longer provides the &quot;guard rails&quot; that guide you to put your code into respective buckets. In return, you get to author component code like how you would write normal JavaScript. This means <strong>you can and should apply any code organization best practices to your Composition API code as you would when writing normal JavaScript</strong>. If you can write well-organized JavaScript, you should also be able to write well-organized Composition API code.</p> <p>Options API does allow you to &quot;think less&quot; when writing component code, which is why many users love it. However, in reducing the mental overhead, it also locks you into the prescribed code organization pattern with no escape hatch, which can make it difficult to refactor or improve code quality in larger scale projects. In this regard, Composition API provides better long term scalability.</p> <h3 id="does-composition-api-cover-all-use-cases"><span id="does-composition-api-cover-all-use-cases" class="anchor"></span>Does Composition API cover all use cases?<a href="#does-composition-api-cover-all-use-cases" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>Yes in terms of stateful logic. When using Composition API, there are only a few options that may still be needed: <code class="hljs inline no-lang">props</code>, <code class="hljs inline no-lang">emits</code>, <code class="hljs inline no-lang">name</code>, and <code class="hljs inline no-lang">inheritAttrs</code>. If using <code class="hljs inline no-lang">&lt;script setup&gt;</code>, then <code class="hljs inline no-lang">inheritAttrs</code> is typically the only option that may require a separate normal <code class="hljs inline no-lang">&lt;script&gt;</code> block.</p> <p>If you intend to exclusively use Composition API (along with the options listed above), you can shave a few kbs off your production bundle via a <a href="https://github.com/vuejs/core/tree/main/packages/vue#bundler-build-feature-flags">compile-time flag</a> that drops Options API related code from Vue. Note this also affects Vue components in your dependencies.</p> <h3 id="can-i-use-both-apis-together"><span id="can-i-use-both-apis-together" class="anchor"></span>Can I use both APIs together?<a href="#can-i-use-both-apis-together" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>Yes. You can use Composition API via the <a href="/api/composition-api-setup.html"><code class="hljs inline no-lang">setup()</code></a> option in an Options API component.</p> <p>However, we only recommend doing so if you have an existing Options API codebase that needs to integrate with new features / external libraries written with Composition API.</p> <h3 id="will-options-api-be-deprecated"><span id="will-options-api-be-deprecated" class="anchor"></span>Will Options API be deprecated?<a href="#will-options-api-be-deprecated" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>No, we do not have any plan to do so. Options API is an integral part of Vue and the reason many developers love it. We also realize that many of the benefits of Composition API only manifest in larger-scale projects, and Options API remains a solid choice for many low-to-medium-complexity scenarios.</p> <h2 id="relationship-with-class-api"><span id="relationship-with-class-api" class="anchor"></span>Relationship with Class API<a href="#relationship-with-class-api" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>We no longer recommend using Class API with Vue 3, given that Composition API provides great TypeScript integration with additional logic reuse and code organization benefits.</p> <h2 id="comparison-with-react-hooks"><span id="comparison-with-react-hooks" class="anchor"></span>Comparison with React Hooks<a href="#comparison-with-react-hooks" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>Composition API provides the same level of logic composition capabilities as React Hooks, but with some important differences.</p> <p>React Hooks are invoked repeatedly every time a component updates. This creates a number of caveats that can confuse even seasoned React developers. It also leads to performance optimization issues that can severely affect development experience. Here are some examples:</p> <ul><li><p>Hooks are call-order sensitive and cannot be conditional.</p></li> <li><p>Variables declared in a React component can be captured by a hook closure and become &quot;stale&quot; if the developer fails to pass in the correct dependencies array. This leads to React developers relying on ESLint rules to ensure correct dependencies are passed. However, the rule is often not smart enough and over-compensates for correctness, which leads to unnecessary invalidation and headaches when edge cases are encountered.</p></li> <li><p>Expensive computations require the use of <code class="hljs inline no-lang">useMemo</code>, which again requires manually passing in the correct dependencies array.</p></li> <li><p>Event handlers passed to child components cause unnecessary child updates by default, and require explicit <code class="hljs inline no-lang">useCallback</code> as an optimization. This is almost always needed, and again requires a correct dependencies array. Neglecting this leads to over-rendering apps by default and can cause performance issues without realizing it.</p></li> <li><p>The stale closure problem, combined with Concurrent features, makes it difficult to reason about when a piece of hooks code is run, and makes working with mutable state that should persist across renders (via <code class="hljs inline no-lang">useRef</code>) cumbersome.</p></li></ul> <p>In comparison, Vue Composition API:</p> <ul><li><p>Invokes <code class="hljs inline no-lang">setup()</code> or <code class="hljs inline no-lang">&lt;script setup&gt;</code> code only once. This makes the code align better with the intuitions of idiomatic JavaScript usage as there are no stale closures to worry about. Composition API calls are also not sensitive to call order and can be conditional.</p></li> <li><p>Vue's runtime reactivity system automatically collects reactive dependencies used in computed properties and watchers, so there's no need to manually declare dependencies.</p></li> <li><p>No need to manually cache callback functions to avoid unnecessary child updates. In general, Vue's fine-grained reactivity system ensures child components only update when they need to. Manual child-update optimizations are rarely a concern for Vue developers.</p></li></ul> <p>We acknowledge the creativity of React Hooks, and it is a major source of inspiration for Composition API. However, the issues mentioned above do exist in its design and we noticed Vue's reactivity model happens to provide a way around them.</p> <i id="scroll-top-button" onclick="handleScrollTop()" aria-hidden="true" class="fa fa-arrow-circle-up fa-lg d-print-none"></i></div> <nav id="page-nav" data-v-e8c82f88><div class="nav-component slim-scroll" data-v-e8c82f88></div> <!----></nav></div> <footer><div class="text-center"><small>[Generated by <a href="https://markbind.org/">MarkBind 4.0.2</a>]</small></div></footer></div>
</body><script src="../../markbind/js/bootstrap-utility.min.js"></script>
<script>
  MarkBind.setupWithSearch()
</script>
    <script>
    function copyCodeBlock(element) {
        const pre = element.parentElement.parentElement;
        const codeElement = pre.querySelector('code');

        // create dummy text element to select() the text field
        const textElement = document.createElement('textarea');
        textElement.value = codeElement.textContent;
        document.body.appendChild(textElement);
        textElement.select();

        document.execCommand('copy');
        document.body.removeChild(textElement);
    }
    </script>
</html>
